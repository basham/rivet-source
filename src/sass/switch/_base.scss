// Copyright (C) 2023 The Trustees of Indiana University
// SPDX-License-Identifier: BSD-3-Clause

@use '../core' as *;
@use 'sass:math';

.#{$prefix}-switch {
  align-items: center;
  background: none;
  background-color: $color-black-400;
  border: math.div($spacing-xxs, 2) solid $color-black-400;
  border-radius: $border-radius-circle;
  color: $color-black-100;
  display: flex;
  height: $spacing-xl + $spacing-xxs;
  line-height: 1.1;
  padding: $spacing-xxs;
  position: relative;
  -webkit-appearance: none;

  &::after {
    background-color: $color-black-000;
    border-radius: $border-radius-circle;
    background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg' version='1.1'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3.41421 2L7.91421 6.5L12.4142 2L13.8284 3.41421L9.32843 7.91421L13.8284 12.4142L12.4142 13.8284L7.91421 9.32843L3.41421 13.8284L2 12.4142L6.5 7.91421L2 3.41421L3.41421 2Z' fill='%234C5A69'/%3E%3C/svg%3E");
    background-size: 16px 16px;
    background-repeat: no-repeat;
    background-position: center center;
    content: "";
    height: $spacing-lg;
    left: $spacing-xxs;
    position: absolute;
    top: $spacing-xxs;
    transition: transform .2s ease;
    width: $spacing-lg;
  }

  &:focus {
    box-shadow: 0 0 0 math.div($spacing-xxs, 2) $color-black-000, 0 0 0 $spacing-xxs $color-black-400;
    outline: none;
  }

  &:hover {
    cursor: pointer;
  }

  &[aria-checked="true"] {
    background-color: $color-green-500;
    border-color: $color-green-500;
    color: $color-green-100;

    &:focus {
      box-shadow: 0 0 0 math.div($spacing-xxs, 2) $color-black-000, 0 0 0 $spacing-xxs $color-green-500;
    }
  }

  &[aria-checked="true"]::after {
    background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M14.9142 4L5.44353 13.4707L1.08997 8.39153L2.60848 7.08995L5.5565 10.5293L13.5 2.58578L14.9142 4Z' fill='%23056E41'/%3E%3C/svg%3E%0A");
    transform: translate($spacing-xl, 0);
  }

  &__on,
  &__off {
    border-radius: $border-radius-circle;
    padding: ($spacing-xxs + .15) $spacing-xs;
    transition: all .1s ease;
  }

  &__on {
    padding-right: ($spacing-xxs + .15);
  }

  &__off {
    padding-left: ($spacing-xxs + .15);
  }

  &--danger[aria-checked="true"] {
    background-color: $color-orange-500;
    border-color: $color-orange-500;
    color: $color-white-base;

    &:focus {
      box-shadow: 0 0 0 math.div($spacing-xxs, 2) $color-black-000, 0 0 0 $spacing-xxs $color-orange-500;
    }

    &::after {
      background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg' version='1.1'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3.41421 2L7.91421 6.5L12.4142 2L13.8284 3.41421L9.32843 7.91421L13.8284 12.4142L12.4142 13.8284L7.91421 9.32843L3.41421 13.8284L2 12.4142L6.5 7.91421L2 3.41421L3.41421 2Z' fill='%23DF3603'/%3E%3C/svg%3E");
    }
  }

  &--small {
    height: $spacing-md;
    padding: math.div($spacing-xxs, 2);

    &::after {
      background-size: 12px 12px;
      height: $spacing-sm;
      left: math.div($spacing-xxs, 2);
      top: math.div($spacing-xxs, 2);
      width: $spacing-sm;
    }

    &[aria-checked="true"]::after {
      /**
       * NOTE: This is a magic number to make spacing around the small switch
       * "handle" appear optically the same on all sides.
       */
      transform: translate($spacing-md * 1.25, 0);
    }
  }

  &--small &__on,
  &--small &__off {
    font-size: $ts-14;
    padding: math.div($spacing-xxs, 2) $spacing-xxs;
  }

  &--small &__on {
    padding-right: 0;
  }

  &--small &__off {
    padding-left: 0;
  }

  &[aria-checked="true"] &__off {
    visibility: hidden;
  }

  &[aria-checked="false"] &__on {
    visibility: hidden;
  }
}